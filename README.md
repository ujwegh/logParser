# logparser

To start type in the project folder 
  **./gradlew bootRun**

**Сервис регистрации событий**  
В файловой системе храним папку с текстовыми файлами (логами сообщений - входными данными этого сервиса,
с названием - дата и время их добавления файла в папку). В каждом текстовом файле строки разделены
символом переноса строки.
На выходе сервиса получаем папку в файловой системе с текстовыми файлами (логами событий этого сервиса,
с названием совпадающим с названием файла из входной папки). В каждом текстовом файле хранятся строки,
разделенные символом переноса строки, в каждой строке - json события.

В одной строке входного файла соответсвует 0 или 1 или несколько строк в выходном файле(с таким же названием).
Каждое json событие содержит в себе 
1) тип этого события (число),
2) время создания события (его системное время), 
3) значения атрибутов события (объект data, внутри которого - набор полей, специфичный для типа события)


**Описание API сервиса:**
1. Добавляем описание нового типа события. На входе - объект. Внутри объекта -
тип события, паттерн выделения события (регулярное выражение), паттерны
выделения атрибутов (объект data, внутри которого набор полей, специфичный для
типа события, значение каждого из полей - регулярное выражение).
2. Получаем описания всех типов событий.

**Правила обработки входной строки:**
1. Входная строка сопоставляется с паттерном выделения каждого события.
Считаем, что во входной строке найдено событие, если входная строка
соответствует паттерну выделения события.
2. Для каждого найденного в строке события выполняется поиск значений его
атрибутов в соответствии с паттернами выделения этих атрибутов.
3. Во входной строке может содержаться неполный набор атрибутов: если в
описании события указаны N атрибутов, то в выходной строке в json события
может быть 0, 1, 2, …, N их значений.
4. Порядок обработки входных строк и записи событий:
А. Файлы обрабатываются в порядке их добавления,
Б. Строки в файле обрабатываюстя по порядку,
В. События из одной строки в выходной файл сохраняются в произвольном 
порядке, но с одним значением временной метки.
